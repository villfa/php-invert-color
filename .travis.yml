language: php

php:
 - 7.1
 - 7.2
 - 7.3
 - nightly
   env: ONLY_UT='true'

matrix:
 fast_finish: true
 allow_failures:
  - php: nightly

before_script:
 - if php -v | grep -q 'Xdebug'; then phpenv config-rm xdebug.ini; fi
 - composer install

script:
 - |
   if [ "$ONLY_UT" == "true" ]; then
    ./vendor/bin/phpunit
   else
    composer run-script test
   fi

