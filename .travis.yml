language: php

matrix:
  include:
    - php: '7.1'
    - php: '7.2'
    - php: '7.3'
    - php: nightly
      env: ONLY_UT='true'
  fast_finish: true

before_script:
 - if php -v | grep -q 'Xdebug'; then phpenv config-rm xdebug.ini; fi
 - composer install --ignore-platform-reqs

script:
  - |
    if [ "$ONLY_UT" == "true" ]; then
      ./vendor/bin/phpunit
    else
      composer run-script test
    fi

